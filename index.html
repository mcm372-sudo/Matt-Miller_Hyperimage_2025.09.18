<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>House â€” Multi-site Demo</title>
  <style>
    :root{ --sidebar-width:180px; --header-height:70px; }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:#fff;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;}

    /* custom cursor: replace images/cursor.png with your PNG. hotspot 16 16 */
    body{ cursor: url('images/cursor.png') 16 16, auto; }

    /* LANDING */
    #landing{position:fixed;inset:0;background:#fff;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:18px;padding:24px;z-index:9999}
    #landing img.diagram{max-width:46vw;min-width:220px;height:auto;display:block}
    #landing p{max-width:760px;text-align:center;font-size:1.15rem;line-height:1.35;color:#111;margin:0}
    #landing small{color:#666}

    /* MAIN GRID */
    .container{display:grid;grid-template-columns:var(--sidebar-width) 1fr;grid-template-rows:var(--header-height) 1fr;grid-template-areas:"header header" "sidebar content";height:100vh}
    .header{grid-area:header;display:flex;align-items:center;padding:12px 18px;gap:10px}
    .sidebar{grid-area:sidebar;padding:18px;display:flex;flex-direction:column;gap:8px}
    .content{grid-area:content;position:relative;background:#fff;display:flex;align-items:center;justify-content:center;overflow:hidden;padding:20px}

    /* Buttons */
    .btn{background:#111;color:#fff;border:0;padding:8px 12px;border-radius:6px;cursor:pointer;font-size:0.95rem}
    .btn:focus{outline:2px solid #00000033}
    .btn.active{background:#666}
    .top-buttons{display:flex;gap:10px;flex-wrap:wrap}

    /* Stage where images appear */
    .stage{position:relative;width:100%;height:100%;display:flex;align-items:center;justify-content:center}
    .layer{position:absolute;max-width:100%;max-height:100%;object-fit:contain;transition:opacity 360ms ease, transform 360ms ease}
    .bg.layer{z-index:1;opacity:1}
    .fg.layer{z-index:2;opacity:1;pointer-events:none}

    /* Make sure the content area doesn't overlap header/sidebar because grid reserves space */

    @media(max-width:800px){:root{--sidebar-width:120px;--header-height:64px} #landing img.diagram{max-width:70vw}}
  </style>
</head>
<body>

  <!-- LANDING PAGE (default) -->
  <div id="landing" role="button" tabindex="0">
    <img class="diagram" src="images/diagram.png" alt="Design diagram">
    <p>This house is a shed, this house likes the sun, this house has many tenants, this house has many versions, put this house anywhere.</p>
    <small>Click anywhere (or press Enter) to enter</small>
  </div>

  <!-- MAIN APP (hidden until landing is dismissed) -->
  <div class="container" id="main" aria-hidden="true" style="display:none">
    <header class="header">
      <nav class="top-buttons" aria-label="Background locations">
        <button class="btn toggle" data-bg="cleveland">Cleveland</button>
        <button class="btn toggle" data-bg="nyc">NYC</button>
        <button class="btn toggle" data-bg="arizona">Arizona</button>
        <button class="btn toggle" data-bg="ba-sing-se">Ba Sing Se</button>
      </nav>
    </header>

    <aside class="sidebar" aria-label="House views">
      <button class="btn toggle" data-fg="house1">House 1</button>
      <button class="btn toggle" data-fg="house2">House 2</button>
      <button class="btn toggle" data-fg="house3">House 3</button>
    </aside>

    <main class="content" id="contentArea">
      <div class="stage" id="stage">
        <!-- Background image (fills but constrained by content area) -->
        <img id="bgLayer" class="layer bg" src="images/cleveland.png" alt="Background">
        <!-- Foreground: your transparent PNG of the building -->
        <img id="fgLayer" class="layer fg" src="images/house1.png" alt="House front">
      </div>
    </main>
  </div>

  <script>
  (function(){
    // Maps: all images are PNGs
    const backgrounds = {
      'cleveland':'images/cleveland.png',
      'nyc':'images/nyc.png',
      'arizona':'images/arizona.png',
      'ba-sing-se':'images/ba-sing-se.png'
    };
    const fronts = {
      'house1':'images/house1.png',
      'house2':'images/house2.png',
      'house3':'images/house3.png'
    };

    const landing = document.getElementById('landing');
    const main = document.getElementById('main');
    const bgLayer = document.getElementById('bgLayer');
    const fgLayer = document.getElementById('fgLayer');

    // ENTER: clicking or pressing Enter/Space on the landing hides it and shows the main view.
    function enter(){
      landing.style.display = 'none';
      main.style.display = 'grid';
      main.setAttribute('aria-hidden','false');
      landing.removeEventListener('click', enter);
      landing.removeEventListener('keydown', onLandingKey);
    }
    function onLandingKey(e){ if(e.key === 'Enter' || e.key === ' ') enter(); }
    landing.addEventListener('click', enter);
    landing.addEventListener('keydown', onLandingKey);

    // Attach handlers to top (background) buttons
    document.querySelectorAll('.top-buttons .toggle').forEach(btn=>{
      btn.addEventListener('click', function(){
        const key = this.dataset.bg;
        if(!backgrounds[key]) return;
        document.querySelectorAll('.top-buttons .toggle').forEach(b=>b.classList.remove('active'));
        this.classList.add('active');
        swapImage(bgLayer, backgrounds[key]);
      });
    });

    // Attach handlers to left (foreground) buttons
    document.querySelectorAll('.sidebar .toggle').forEach(btn=>{
      btn.addEventListener('click', function(){
        const key = this.dataset.fg;
        if(!fronts[key]) return;
        document.querySelectorAll('.sidebar .toggle').forEach(b=>b.classList.remove('active'));
        this.classList.add('active');
        swapImage(fgLayer, fronts[key]);
      });
    });

    // fade + swap helper
    function swapImage(imgEl, newSrc){
      const tmp = new Image();
      tmp.src = newSrc;
      tmp.onload = ()=>{
        imgEl.style.opacity = 0;
        setTimeout(()=>{ imgEl.src = newSrc; imgEl.style.opacity = 1; }, 320);
      };
      tmp.onerror = ()=>{ console.warn('Could not load', newSrc); };
    }

    // initialize active buttons
    const defaultBgBtn = document.querySelector('.top-buttons .toggle[data-bg="cleveland"]');
    const defaultFgBtn = document.querySelector('.sidebar .toggle[data-fg="house1"]');
    if(defaultBgBtn) defaultBgBtn.classList.add('active');
    if(defaultFgBtn) defaultFgBtn.classList.add('active');

    // keyboard support
    document.addEventListener('keydown', function(e){
      if(main.style.display === 'none') return; 
      const bgBtns = Array.from(document.querySelectorAll('.top-buttons .toggle'));
      const fgBtns = Array.from(document.querySelectorAll('.sidebar .toggle'));
      if(['ArrowLeft','ArrowRight'].includes(e.key)){
        e.preventDefault();
        const active = bgBtns.findIndex(b=>b.classList.contains('active'));
        if(active === -1) return;
        const next = (e.key === 'ArrowRight') ? (active+1)%bgBtns.length : (active-1+bgBtns.length)%bgBtns.length;
        bgBtns[next].click();
      }
      if(['ArrowUp','ArrowDown'].includes(e.key)){
        e.preventDefault();
        const active = fgBtns.findIndex(b=>b.classList.contains('active'));
        if(active === -1) return;
        const next = (e.key === 'ArrowDown') ? (active+1)%fgBtns.length : (active-1+fgBtns.length)%fgBtns.length;
        fgBtns[next].click();
      }
    });

  })();
  </script>
</body>
</html>
